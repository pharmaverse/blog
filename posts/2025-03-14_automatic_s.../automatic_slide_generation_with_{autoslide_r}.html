<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.33">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Stefan P. Thoma, Joe Zhu">
<meta name="dcterms.date" content="2025-03-14">
<meta name="description" content="{autoslider.core} is a newly open-sourced package for automatically creating standard study outputs and adding them to PowerPoint slides.">

<title>Automatic slide generation with autoslider.core – pharmaverse blog</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../media/pharmaverseblog.png" rel="icon" type="image/png">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ea385d0e468b0dd5ea5bf0780b1290d9.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-781c7193d8ff8c517ec9b22289c63250.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-6ZDR80SCKG"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-6ZDR80SCKG', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"express",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  
<style>

      .quarto-title-block .quarto-title-banner {
        background: #eeeeee;
      }
</style>
<script src="../../site_libs/bslib-component-js-0.9.0/components.min.js"></script>
<script src="../../site_libs/bslib-component-js-0.9.0/web-components.min.js" type="module"></script>
<link href="../../site_libs/bslib-component-css-0.9.0/components.css" rel="stylesheet">
<script src="../../site_libs/bslib-tag-require-0.9.0/tag-require.js"></script>


<link rel="stylesheet" href="../../styles.css">
<meta property="og:title" content="Automatic slide generation with autoslider.core – pharmaverse blog">
<meta property="og:description" content="{autoslider.core} is a newly open-sourced package for automatically creating standard study outputs and adding them to PowerPoint slides.">
<meta property="og:image" content="https://pharmaverse.github.io/blog/posts/2025-03-14_automatic_s.../autoslider.png">
<meta property="og:site_name" content="pharmaverse blog">
<meta property="og:image:height" content="342">
<meta property="og:image:width" content="336">
</head>

<body class="floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">pharmaverse blog</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/pharmaverse/blog"> <i class="bi bi-github" role="img" aria-label="github">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../session_info.html"> 
<span class="menu-text">Session Info</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Automatic slide generation with autoslider.core</h1>
                  <div>
        <div class="description">
          {autoslider.core} is a newly open-sourced package for automatically creating standard study outputs and adding them to PowerPoint slides.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">TLG</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Stefan P. Thoma, Joe Zhu </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">March 14, 2025</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#requirements" id="toc-requirements" class="nav-link active" data-scroll-target="#requirements">Requirements</a></li>
  <li><a href="#workflow" id="toc-workflow" class="nav-link" data-scroll-target="#workflow">Workflow</a></li>
  <li><a href="#specifications-specs.yml" id="toc-specifications-specs.yml" class="nav-link" data-scroll-target="#specifications-specs.yml">Specifications (<code>specs.yml</code>)</a></li>
  <li><a href="#filters-filters.yml" id="toc-filters-filters.yml" class="nav-link" data-scroll-target="#filters-filters.yml">Filters (filters.yml)</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#backend-machinery" id="toc-backend-machinery" class="nav-link" data-scroll-target="#backend-machinery">Backend Machinery</a></li>
  <li><a href="#example-of-saving-outputs-to-a-slide" id="toc-example-of-saving-outputs-to-a-slide" class="nav-link" data-scroll-target="#example-of-saving-outputs-to-a-slide">Example of saving outputs to a slide:</a></li>
  <li><a href="#writing-custom-functions" id="toc-writing-custom-functions" class="nav-link" data-scroll-target="#writing-custom-functions">Writing Custom Functions</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<!--------------- typical setup ----------------->
<!--------------- post begins here ----------------->
<p>We are excited to announce that the <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> package is now a part of pharmaverse!</p>
<p>The normal process of creating clinical study slides is that a statistician manually types in numbers from outputs and a separate statistician then double checks the typed-in numbers. This process is time consuming, resource intensive, and error prone. This package lets users create slides with study-specific outputs in an automated and reproducible way – without the need to copy-paste. It reduces the amount of work and the required time when creating slides, and reduces the risk of errors from manually typing or copying numbers from the output to slides. It also helps users to avoid unnecessary stress when creating large amounts of slide decks in a short time window. It is particularly helpful for slides that need to be continuously created with updated data, such as slides needed for dose-escalation meetings.</p>
<p>The <code>autoslider</code> development work started as a Roche internal initiative. As it grew over the years, it was well received and we decided to open-source this package while at the same time not causing any downstream breaking changes to our internal users. Therefore, the <code>autoslider</code> package became two layers, the outer layer exposed to&nbsp;internal users remains as <code>autoslider</code>. It now mostly contains Roche-specific formats, layouts and designs. The inner layer, aka <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip>, which controls the rendering and workflow, is open source and fully functional and user-facing on its own. We consider <code>autoslider</code> as a framework, and would like to invite users to build their own <code>autoslider.*</code> packages. You can find t0he developer guidelines at the <a href="https://insightsengineering.github.io/autoslider.core/latest-tag/articles/opensource.html">package homepage</a>.</p>
<p>The value proposition of the <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> package is two-fold:</p>
<ol type="1">
<li>functions to create standard outputs with (some) inbuilt customization capability</li>
</ol>
<ul>
<li>mostly built on code from the <a href="https://insightsengineering.github.io/tlg-catalog/stable/">tlg catalog</a></li>
<li>you can create your own functions as well</li>
</ul>
<ol type="1">
<li>back-end machinery to manage the workflow. This includes:</li>
</ol>
<ul>
<li>creating outputs from a specification file</li>
<li>filtering data according to a specification file</li>
<li>decorating outputs (think: footnotes &amp; titles)</li>
<li>adding these outputs to a PowerPoint slide deck, including pagination.</li>
</ul>
<p>In this blog post, we will guide you through the <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> package and demonstrate how it can be used to streamline your data analysis and output slide generation.</p>
<section id="requirements" class="level2">
<h2 class="anchored" data-anchor-id="requirements">Requirements</h2>
<p>To follow along with this tutorial, you need to have the <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> package installed. You will also need data available in ADaM format (or SDTM, depending on the template used), which should be stored in a named list where the names correspond to ADaM datasets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(autoslider.core)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Registered S3 method overwritten by 'tern':
  method   from 
  tidy.glm broom</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>
Attaching package: 'dplyr'</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:stats':

    filter, lag</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The following objects are masked from 'package:base':

    intersect, setdiff, setequal, union</code></pre>
</div>
</div>
</section>
<section id="workflow" class="level2">
<h2 class="anchored" data-anchor-id="workflow">Workflow</h2>
<p>To get started, the folder structure for your project could look something like this:</p>
<pre><code>Copy code
├── programs
│   ├── run_script.R
│   ├── R
│   │   ├── helping_functions.R
│   │   ├── output_functions.R
├── outputs
├── specs.yml
├── filters.yml</code></pre>
<p>The <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> workflow would involve implementing the key aspects in the <code>run_script.R</code> file. This script guides through the workflow without needing the files in <code>R/</code>. However, custom output-creating functions can be stored in the <code>R/</code> folder.</p>
</section>
<section id="specifications-specs.yml" class="level2">
<h2 class="anchored" data-anchor-id="specifications-specs.yml">Specifications (<code>specs.yml</code>)</h2>
<p>This file contains the specifications of all outputs you want to create. Each output includes details such as the program name, footnotes &amp; titles, paper orientation and font size, suffix, and additional arguments.</p>
<p>The following example <code>specs.yml</code> content would create two outputs based off of two template functions, <a href="https://insightsengineering.github.io/autoslider.core/latest-tag/reference/t_ds_slide.html?q=t_ds#null">t_ds_slide()</a> and <a href="https://insightsengineering.github.io/autoslider.core/latest-tag/reference/t_dm_slide.html?q=t_dm_slide#null">t_dm_slide()</a>:</p>
<pre><code>- program: t_ds_slide
  titles: Patient Disposition ({filter_titles("adsl")})
  footnotes: 't_ds footnotes'
  paper: L6
  suffix: ITT
- program: t_dm_slide
  titles: Patient Demographics and Baseline Characteristics
  footnotes: 't_dm_slide footnote'
  paper: L6
  suffix: ITT
  args:
    arm: "TRT01A"
    vars: ["SEX", "AGE", "RACE", "ETHNIC", "COUNTRY"]</code></pre>
</section>
<section id="filters-filters.yml" class="level2">
<h2 class="anchored" data-anchor-id="filters-filters.yml">Filters (filters.yml)</h2>
<p>In the filters.yml file, the names of the filters used across outputs are specified. Each filter includes a name, title, filtering condition, target dataset, and type.</p>
<p>The following example <code>filters.yml</code> file specifies four commonly used filters:</p>
<pre><code>ITT:
  title: Intent to Treat Population
  condition: ITTFL =='Y'
  target: adsl
  type: slref
SAS:
  title: Secondary Analysis Set
  condition: SASFL == 'Y'
  target: adsl
  type: slref
SE:
  title: Safety Evaluable Population
  condition: SAFFL=='Y'
  target: adsl
  type: slref
SER:
  title: Serious Adverse Events
  condition: AESER == 'Y'
  target: adae
  type: anl</code></pre>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<p>An overview of all <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> functions can be found <a href="https://insightsengineering.github.io/autoslider.core/latest-tag/reference/index.html">here</a>. Custom functions can be created if the built-in functions do not meet your needs.</p>
</section>
<section id="backend-machinery" class="level2">
<h2 class="anchored" data-anchor-id="backend-machinery">Backend Machinery</h2>
<p>A typical workflow involves defining paths to the YAML files, loading the filters, reading the data, creating the outputs based on the specifications, and decorating the outputs with titles and footnotes. Example code for setting up the workflow:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># define path to the yml files</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>spec_file <span class="ot">&lt;-</span> <span class="st">"spec.yml"</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>filters <span class="ot">&lt;-</span> <span class="st">"filters.yml"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># load all filters</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>filters<span class="sc">::</span><span class="fu">load_filters</span>(filters, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># read data</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">"adsl"</span> <span class="ot">=</span> eg_adsl <span class="sc">%&gt;%</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">FASFL =</span> SAFFL, <span class="co"># add FASFL for illustrative purpose for t_pop_slide</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>      <span class="co"># DISTRTFL is needed for t_ds_slide but is missing in example data</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">DISTRTFL =</span> <span class="fu">sample</span>(<span class="fu">c</span>(<span class="st">"Y"</span>, <span class="st">"N"</span>), <span class="at">size =</span> <span class="fu">length</span>(TRT01A), <span class="at">replace =</span> <span class="cn">TRUE</span>, <span class="at">prob =</span> <span class="fu">c</span>(.<span class="dv">1</span>, .<span class="dv">9</span>))</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">preprocess_t_ds</span>(), <span class="co"># this preproccessing is required by one of the autoslider.core functions</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"adae"</span> <span class="ot">=</span> eg_adae,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"adtte"</span> <span class="ot">=</span> eg_adtte,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"adrs"</span> <span class="ot">=</span> eg_adrs,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">"adlb"</span> <span class="ot">=</span> eg_adlb</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co"># create outputs based on the specs and the functions</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>outputs <span class="ot">&lt;-</span> spec_file <span class="sc">%&gt;%</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_spec</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter_spec</span>(., program <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"t_ds_slide"</span>, <span class="st">"t_dm_slide"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_outputs</span>(<span class="at">datasets =</span> data) <span class="sc">%&gt;%</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">decorate_outputs</span>(<span class="at">version_label =</span> <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>✔ 2/3 outputs matched the filter condition `program %in% c("t_ds_slide", "t_dm_slide")`.
❯ Running program `t_ds_slide` with suffix 'ITT'.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Filter 'ITT' matched target ADSL.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>400/400 records matched the filter condition `ITTFL == 'Y'`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>❯ Running program `t_dm_slide` with suffix 'ITT'.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Filter 'ITT' matched target ADSL.
400/400 records matched the filter condition `ITTFL == 'Y'`.</code></pre>
</div>
</div>
</section>
<section id="example-of-saving-outputs-to-a-slide" class="level2">
<h2 class="anchored" data-anchor-id="example-of-saving-outputs-to-a-slide">Example of saving outputs to a slide:</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Output to slides with template and color theme</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>outputs <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_slides</span>(</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">outfile =</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".pptx"</span>),</span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">template =</span> <span class="fu">file.path</span>(<span class="fu">system.file</span>(<span class="at">package =</span> <span class="st">"autoslider.core"</span>), <span class="st">"/theme/basic.pptx"</span>),</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">table_format =</span> autoslider_format</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Demographics and Baseline Characteristics, Intent to Treat Population"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Demographics and Baseline Characteristics, Intent to Treat Population (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Demographics and Baseline Characteristics, Intent to Treat Population (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Demographics and Baseline Characteristics, Intent to Treat Population (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
</div>
</section>
<section id="writing-custom-functions" class="level2">
<h2 class="anchored" data-anchor-id="writing-custom-functions">Writing Custom Functions</h2>
<p>For study-specific outputs not covered by <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> functions, you can create custom functions. Custom functions need to return either a <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>Create Elegant Data Visualisations Using the Grammar of Graphics • ggplot2</template> <a href="https://ggplot2.tidyverse.org" class="r-link-pkg" target="_blank">{ggplot2}</a> </bslib-tooltip> (for plots), <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/rtables: Reporting tables with R</template> <a href="https://github.com/insightsengineering/rtables" class="r-link-pkg" target="_blank">{rtables}</a> </bslib-tooltip> (for tables), or <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>rlistings</template> <a href="https://insightsengineering.github.io/rlistings/" class="r-link-pkg" target="_blank">{rlistings}</a> </bslib-tooltip> or <code>data.frame</code> objects (for listings).</p>
<p>Example custom function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>lbt06 <span class="ot">&lt;-</span> <span class="cf">function</span>(datasets) {</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  adsl <span class="ot">&lt;-</span> datasets<span class="sc">$</span>adsl <span class="sc">%&gt;%</span> tern<span class="sc">::</span><span class="fu">df_explicit_na</span>()</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>  adlb <span class="ot">&lt;-</span> datasets<span class="sc">$</span>adlb <span class="sc">%&gt;%</span> tern<span class="sc">::</span><span class="fu">df_explicit_na</span>()</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>  adlb_f <span class="ot">&lt;-</span> adlb <span class="sc">%&gt;%</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(ABLFL <span class="sc">!=</span> <span class="st">"Y"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span>(AVISIT <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"SCREENING"</span>, <span class="st">"BASELINE"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">AVISIT =</span> <span class="fu">droplevels</span>(AVISIT)) <span class="sc">%&gt;%</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    formatters<span class="sc">::</span><span class="fu">var_relabel</span>(<span class="at">AVISIT =</span> <span class="st">"Visit"</span>)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  adlb_f_crp <span class="ot">&lt;-</span> adlb_f <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(PARAMCD <span class="sc">==</span> <span class="st">"CRP"</span>)</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>  split_fun <span class="ot">&lt;-</span> rtables<span class="sc">::</span>drop_split_levels</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>  lyt <span class="ot">&lt;-</span> rtables<span class="sc">::</span><span class="fu">basic_table</span>(<span class="at">show_colcounts =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>    rtables<span class="sc">::</span><span class="fu">split_cols_by</span>(<span class="st">"ARM"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>    rtables<span class="sc">::</span><span class="fu">split_rows_by</span>(<span class="st">"AVISIT"</span>, <span class="at">split_fun =</span> split_fun, <span class="at">label_pos =</span> <span class="st">"topleft"</span>, <span class="at">split_label =</span> formatters<span class="sc">::</span><span class="fu">obj_label</span>(adlb_f_crp<span class="sc">$</span>AVISIT)) <span class="sc">%&gt;%</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>    tern<span class="sc">::</span><span class="fu">count_abnormal_by_baseline</span>(<span class="st">"ANRIND"</span>, <span class="at">abnormal =</span> <span class="fu">c</span>(<span class="at">Low =</span> <span class="st">"LOW"</span>, <span class="at">High =</span> <span class="st">"HIGH"</span>), <span class="at">.indent_mods =</span> <span class="dv">4</span>L) <span class="sc">%&gt;%</span></span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>    tern<span class="sc">::</span><span class="fu">append_varlabels</span>(adlb_f_crp, <span class="st">"ANRIND"</span>, <span class="at">indent =</span> <span class="dv">1</span>L) <span class="sc">%&gt;%</span></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>    rtables<span class="sc">::</span><span class="fu">append_topleft</span>(<span class="st">"    Baseline Status"</span>)</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a>  result <span class="ot">&lt;-</span> rtables<span class="sc">::</span><span class="fu">build_table</span>(<span class="at">lyt =</span> lyt, <span class="at">df =</span> adlb_f_crp, <span class="at">alt_counts_df =</span> adsl) <span class="sc">%&gt;%</span></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>    rtables<span class="sc">::</span><span class="fu">trim_rows</span>()</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>  result</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Testing the custom function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lbt06</span>(data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Visit                                                                                  
  Analysis Reference Range Indicator     A: Drug X        B: Placebo     C: Combination
    Baseline Status                       (N=134)          (N=134)          (N=132)    
———————————————————————————————————————————————————————————————————————————————————————
WEEK 1 DAY 8                                                                           
  Low                                                                                  
            Not low                    16/119 (13.4%)   22/113 (19.5%)   24/112 (21.4%)
            Low                         2/15 (13.3%)     2/21 (9.5%)       7/20 (35%)  
            Total                      18/134 (13.4%)   24/134 (17.9%)   31/132 (23.5%)
  High                                                                                 
            Not high                   21/114 (18.4%)   20/112 (17.9%)   17/115 (14.8%)
            High                         2/20 (10%)      4/22 (18.2%)     3/17 (17.6%) 
            Total                      23/134 (17.2%)   24/134 (17.9%)   20/132 (15.2%)
WEEK 2 DAY 15                                                                          
  Low                                                                                  
            Not low                    26/119 (21.8%)   20/113 (17.7%)   12/112 (10.7%)
            Low                         2/15 (13.3%)     3/21 (14.3%)      4/20 (20%)  
            Total                      28/134 (20.9%)   23/134 (17.2%)   16/132 (12.1%)
  High                                                                                 
            Not high                   15/114 (13.2%)   17/112 (15.2%)    15/115 (13%) 
            High                         2/20 (10%)      4/22 (18.2%)     4/17 (23.5%) 
            Total                      17/134 (12.7%)   21/134 (15.7%)   19/132 (14.4%)
WEEK 3 DAY 22                                                                          
  Low                                                                                  
            Not low                    15/119 (12.6%)   21/113 (18.6%)   18/112 (16.1%)
            Low                             0/15         3/21 (14.3%)         0/20     
            Total                      15/134 (11.2%)   24/134 (17.9%)   18/132 (13.6%)
  High                                                                                 
            Not high                   22/114 (19.3%)   18/112 (16.1%)   17/115 (14.8%)
            High                         2/20 (10%)      5/22 (22.7%)     1/17 (5.9%)  
            Total                      24/134 (17.9%)   23/134 (17.2%)   18/132 (13.6%)
WEEK 4 DAY 29                                                                          
  Low                                                                                  
            Not low                    30/119 (25.2%)   13/113 (11.5%)   16/112 (14.3%)
            Low                          3/15 (20%)      2/21 (9.5%)       5/20 (25%)  
            Total                      33/134 (24.6%)   15/134 (11.2%)   21/132 (15.9%)
  High                                                                                 
            Not high                   17/114 (14.9%)   11/112 (9.8%)    16/115 (13.9%)
            High                         2/20 (10%)      6/22 (27.3%)     3/17 (17.6%) 
            Total                      19/134 (14.2%)   17/134 (12.7%)   19/132 (14.4%)
WEEK 5 DAY 36                                                                          
  Low                                                                                  
            Not low                    17/119 (14.3%)   19/113 (16.8%)   16/112 (14.3%)
            Low                         2/15 (13.3%)     3/21 (14.3%)      5/20 (25%)  
            Total                      19/134 (14.2%)   22/134 (16.4%)   21/132 (15.9%)
  High                                                                                 
            Not high                   19/114 (16.7%)   17/112 (15.2%)   11/115 (9.6%) 
            High                         4/20 (20%)      6/22 (27.3%)     2/17 (11.8%) 
            Total                      23/134 (17.2%)   23/134 (17.2%)   13/132 (9.8%) </code></pre>
</div>
</div>
<p>To use the custom function within the <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> workflow, ensure it is available in the global environment:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"programs/output_functions.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>With the correct <code>specs.yml</code> and <code>filters.yml</code>, integrate the custom function into the general workflow:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>filters <span class="ot">&lt;-</span> <span class="st">"filters.yml"</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>spec_file <span class="ot">&lt;-</span> <span class="st">"specs.yml"</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>filters<span class="sc">::</span><span class="fu">load_filters</span>(filters, <span class="at">overwrite =</span> <span class="cn">TRUE</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>outputs <span class="ot">&lt;-</span> spec_file <span class="sc">%&gt;%</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_spec</span>() <span class="sc">%&gt;%</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_outputs</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">decorate_outputs</span>()</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>outputs<span class="sc">$</span>lbt06_ITT_LBCRP_LBNOBAS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-hide="true">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>outputs <span class="ot">&lt;-</span> spec_file <span class="sc">%&gt;%</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_spec</span>() <span class="sc">%&gt;%</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">generate_outputs</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">decorate_outputs</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>❯ Running program `t_ds_slide` with suffix 'ITT'.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Filter 'ITT' matched target ADSL.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>400/400 records matched the filter condition `ITTFL == 'Y'`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>❯ Running program `t_dm_slide` with suffix 'ITT'.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Filter 'ITT' matched target ADSL.
400/400 records matched the filter condition `ITTFL == 'Y'`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>❯ Running program `lbt06` with suffix 'ITT_LBCRP_LBNOBAS'.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Filter 'ITT' matched target ADSL.
400/400 records matched the filter condition `ITTFL == 'Y'`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Filters 'LBCRP', 'LBNOBAS' matched target ADLB.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>2000/8400 records matched the filter condition `PARAMCD == 'CRP' &amp; (ABLFL != 'Y' &amp; !(AVISIT %in% c('SCREENING', 'BASELINE')))`.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>outputs<span class="sc">$</span>lbt06_ITT_LBCRP_LBNOBAS</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>An object of class "dVTableTree"
Slot "tbl":</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code> Patient Disposition (Intent to Treat Population)

———————————————————————————————————————————————————————————————————————————————————————
Visit                                                                                  
  Analysis Reference Range Indicator     A: Drug X        B: Placebo     C: Combination
    Baseline Status                       (N=134)          (N=134)          (N=132)    
———————————————————————————————————————————————————————————————————————————————————————
WEEK 1 DAY 8                                                                           
  Low                                                                                  
            Not low                    16/119 (13.4%)   22/113 (19.5%)   24/112 (21.4%)
            Low                         2/15 (13.3%)     2/21 (9.5%)       7/20 (35%)  
            Total                      18/134 (13.4%)   24/134 (17.9%)   31/132 (23.5%)
  High                                                                                 
            Not high                   21/114 (18.4%)   20/112 (17.9%)   17/115 (14.8%)
            High                         2/20 (10%)      4/22 (18.2%)     3/17 (17.6%) 
            Total                      23/134 (17.2%)   24/134 (17.9%)   20/132 (15.2%)
WEEK 2 DAY 15                                                                          
  Low                                                                                  
            Not low                    26/119 (21.8%)   20/113 (17.7%)   12/112 (10.7%)
            Low                         2/15 (13.3%)     3/21 (14.3%)      4/20 (20%)  
            Total                      28/134 (20.9%)   23/134 (17.2%)   16/132 (12.1%)
  High                                                                                 
            Not high                   15/114 (13.2%)   17/112 (15.2%)    15/115 (13%) 
            High                         2/20 (10%)      4/22 (18.2%)     4/17 (23.5%) 
            Total                      17/134 (12.7%)   21/134 (15.7%)   19/132 (14.4%)
WEEK 3 DAY 22                                                                          
  Low                                                                                  
            Not low                    15/119 (12.6%)   21/113 (18.6%)   18/112 (16.1%)
            Low                             0/15         3/21 (14.3%)         0/20     
            Total                      15/134 (11.2%)   24/134 (17.9%)   18/132 (13.6%)
  High                                                                                 
            Not high                   22/114 (19.3%)   18/112 (16.1%)   17/115 (14.8%)
            High                         2/20 (10%)      5/22 (22.7%)     1/17 (5.9%)  
            Total                      24/134 (17.9%)   23/134 (17.2%)   18/132 (13.6%)
WEEK 4 DAY 29                                                                          
  Low                                                                                  
            Not low                    30/119 (25.2%)   13/113 (11.5%)   16/112 (14.3%)
            Low                          3/15 (20%)      2/21 (9.5%)       5/20 (25%)  
            Total                      33/134 (24.6%)   15/134 (11.2%)   21/132 (15.9%)
  High                                                                                 
            Not high                   17/114 (14.9%)   11/112 (9.8%)    16/115 (13.9%)
            High                         2/20 (10%)      6/22 (27.3%)     3/17 (17.6%) 
            Total                      19/134 (14.2%)   17/134 (12.7%)   19/132 (14.4%)
WEEK 5 DAY 36                                                                          
  Low                                                                                  
            Not low                    17/119 (14.3%)   19/113 (16.8%)   16/112 (14.3%)
            Low                         2/15 (13.3%)     3/21 (14.3%)      5/20 (25%)  
            Total                      19/134 (14.2%)   22/134 (16.4%)   21/132 (15.9%)
  High                                                                                 
            Not high                   19/114 (16.7%)   17/112 (15.2%)   11/115 (9.6%) 
            High                         4/20 (20%)      6/22 (27.3%)     2/17 (11.8%) 
            Total                      23/134 (17.2%)   23/134 (17.2%)   13/132 (9.8%) 
———————————————————————————————————————————————————————————————————————————————————————

t_ds footnotes
Confidential and for internal use only
GitHub repository: NA
Git hash: a6c4ef02904ed482731581455d9cc99e6400e6ea

Slot "titles":
 Patient Disposition (Intent to Treat Population)

Slot "footnotes":
[1] "t_ds footnotes"                        
[2] "Confidential and for internal use only"

Slot "paper":
[1] "L6"

Slot "width":
[1] 36 14 14 14</code></pre>
</div>
</div>
<p>Generate the slides:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>filepath <span class="ot">&lt;-</span> <span class="fu">tempfile</span>(<span class="at">fileext =</span> <span class="st">".pptx"</span>)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="fu">generate_slides</span>(outputs, <span class="at">outfile =</span> filepath)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Demographics and Baseline Characteristics, Intent to Treat Population"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Demographics and Baseline Characteristics, Intent to Treat Population (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Demographics and Baseline Characteristics, Intent to Treat Population (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Demographics and Baseline Characteristics, Intent to Treat Population (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] " Patient Disposition (Intent to Treat Population) (cont.)"</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in (function (x, layout = NULL, master = NULL, ..., .dots = NULL) : Calling `add_slide()` without specifying a `layout` is deprecated.
 Please pass a `layout` or use `layout_default()` to set a default.
 =&gt; I will now continue with the former `layout` default "Title and Content" for backwards compatibility...</code></pre>
</div>
</div>
<p>We hope this guide helps you get started with <bslib-tooltip placement="auto" bsoptions="[]" data-require-bs-version="5" data-require-bs-caller="tooltip()"> <template>GitHub - insightsengineering/autoslider.core: autoslideR core</template> <a href="https://github.com/insightsengineering/autoslider.core" class="r-link-pkg" target="_blank">{autoslider.core}</a> </bslib-tooltip> in pharmaverse. Happy coding!</p>
<!--------------- appendices go here ----------------->
</section>
<div class="cell">
<div class="cell-output-display">


</div>
</div>



<div id="quarto-appendix" class="default"><section id="last-updated" class="level2 appendix"><h2 class="anchored quarto-appendix-heading">Last updated</h2><div class="quarto-appendix-contents">

<p>2025-08-13 17:00:31.018636</p>
</div></section><section id="details" class="level2 appendix"><h2 class="anchored quarto-appendix-heading">Details</h2><div class="quarto-appendix-contents">

<p><a href="https://github.com/pharmaverse/blog/tree/main/posts/zzz_DO_NOT_EDIT_automatic_s.../automatic_slide_generation_with_%7Bautoslide_r%7D.qmd">Source</a>, <a href="https://pharmaverse.github.io/blog/session_info.html">Session info</a></p>
</div></section><section class="quarto-appendix-contents" id="quarto-reuse"><h2 class="anchored quarto-appendix-heading">Reuse</h2><div class="quarto-appendix-contents"><div><a rel="license" href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a></div></div></section><section class="quarto-appendix-contents" id="quarto-citation"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{p._thoma,_joe_zhu2025,
  author = {P. Thoma, Joe Zhu, Stefan},
  title = {Automatic Slide Generation with Autoslider.core},
  date = {2025-03-14},
  url = {https://pharmaverse.github.io/blog/posts/2025-03-14_automatic_s.../automatic_slide_generation_with_{autoslide_r}.html},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-p._thoma,_joe_zhu2025" class="csl-entry quarto-appendix-citeas" role="listitem">
P. Thoma, Joe Zhu, Stefan. 2025. <span>“Automatic Slide Generation with
Autoslider.core.”</span> March 14, 2025. <a href="https://pharmaverse.github.io/blog/posts/2025-03-14_automatic_s.../automatic_slide_generation_with_{autoslide_r}.html">https://pharmaverse.github.io/blog/posts/2025-03-14_automatic_s.../automatic_slide_generation_with_{autoslide_r}.html</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/pharmaverse\.github\.io\/blog");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">

<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>